{"remainingRequest":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\管家\\Desktop\\node_app\\client\\src\\views\\foundlist.vue?vue&type=style&index=0&id=8bf08314&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\src\\views\\foundlist.vue","mtime":1582725871713},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmFsbGxpc3R7DQogcGFkZGluZzogMTZweDsNCn0NCiAgLmJ0blJpZ2h0ew0KICAgIGZsb2F0OnJpZ2h0Ow0KICB9DQogIC5ibG9ja3sNCiAgICBmbG9hdDogcmlnaHQ7DQogIH0NCg=="},{"version":3,"sources":["foundlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"foundlist.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"alllist\">\r\n  \r\n  <div>\r\n   <el-form :inline=\"true\" :model=\"date\" class=\"demo-form-inline\">\r\n  <el-form-item label=\"投标时间筛选:\">\r\n   <el-date-picker\r\n      v-model=\"date.value1\"\r\n      type=\"date\"\r\n      placeholder=\"选择日期\">\r\n    </el-date-picker>\r\n  </el-form-item>\r\n  <el-form-item label=\"---\">\r\n  <el-date-picker\r\n      v-model=\"date.value2\"\r\n      type=\"date\"\r\n      placeholder=\"选择日期\">\r\n    </el-date-picker>\r\n  </el-form-item>\r\n  <el-form-item>\r\n    <el-button type=\"primary\" @click=\"onselect\">筛选</el-button>\r\n  </el-form-item>\r\n    <el-form-item class=\"btnRight\">\r\n    <el-button type=\"primary\" v-if=\"user.identify == 'manager'\" @click=\"onadd\">添加</el-button>\r\n  </el-form-item>\r\n</el-form>\r\n  </div>\r\n    <div class=\"foundList\">\r\n         <el-table\r\n         v-if=\"tableData.length > 0\"\r\n    :data=\"tableData\"\r\n     border\r\n      min-height='450'\r\n    style=\"width: 100%\">\r\n   <el-table-column\r\n      label=\"创建时间\"\r\n     align='center'\r\n    type='index'\r\n      width=\"50\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      label=\"创建时间\"\r\n   align='center'\r\n      width=\"180\">\r\n      <template slot-scope=\"scope\">\r\n        <span >{{ scope.row.date }}</span>\r\n      </template>\r\n    </el-table-column>\r\n      <el-table-column\r\n      label=\"收支类型\"\r\n       align='center'\r\n      width=\"180\">\r\n      <template slot-scope=\"scope\">\r\n        <span>{{ scope.row.type }}</span>\r\n      </template>\r\n    </el-table-column>\r\n      <el-table-column\r\n      label=\"收支描述\"\r\n       align='center'\r\n      width=\"180\">\r\n      <template slot-scope=\"scope\">\r\n        <span >{{ scope.row.describe}}</span>\r\n      </template>\r\n    </el-table-column>\r\n      <el-table-column\r\n      label=\"收入\"\r\n       align='center'\r\n      width=\"100\">\r\n      <template slot-scope=\"scope\">\r\n        <span style=\"color:green\">+{{ scope.row.income }}</span>\r\n      </template>\r\n    </el-table-column>\r\n      <el-table-column\r\n      label=\"支出\"\r\n       align='center'\r\n       color=\"red\"\r\n      width=\"100\">\r\n      <template slot-scope=\"scope\">\r\n        <span style=\"color:red\">-{{ scope.row.expend }}</span>\r\n      </template>\r\n    </el-table-column>\r\n       <el-table-column\r\n      label=\"账户现金\"\r\n       align='center'\r\n      width=\"100\">\r\n      <template slot-scope=\"scope\">\r\n        <span >{{ scope.row.cash }}</span>\r\n      </template>\r\n    </el-table-column>\r\n       <el-table-column\r\n      label=\"备注\"\r\n       align='center'\r\n      width=\"100\">\r\n      <template slot-scope=\"scope\">\r\n        <span >{{ scope.row.remark }}</span>\r\n      </template>\r\n    </el-table-column>\r\n    <el-table-column label=\"操作\"  align='center'>\r\n        \r\n      <template slot-scope=\"scope\" v-if=\"user.identify == 'manager'\">\r\n        <el-button\r\n          size=\"mini\"\r\n          @click=\"handleEdit( scope.row)\">编辑</el-button>\r\n        <el-button\r\n          size=\"mini\"\r\n          type=\"danger\"\r\n          @click=\"handleDelete(scope.row)\">删除</el-button>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n  <indexadd :dialogFormVisible=\"ifshow\" :form=form @updata='getProfile'></indexadd>\r\n    </div>\r\n     <div class=\"block\">\r\n    <el-pagination\r\n      @current-change=\"handleCurrentChange\"\r\n      current-page.sync=\"pages.current_page\"\r\n      :page-size=\"pages.page_size\"\r\n      :layout=\"pages.lay_out\"\r\n      :total=\"pages.to_toal\">\r\n    </el-pagination>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport indexadd from '../components/indexadd.vue'\r\nexport default {\r\n    name:'foundlist',\r\n    data(){\r\n        return{\r\n          date:{\r\n            value1:'',\r\n            value2:''\r\n          },\r\n          pages:{\r\n          current_page:1,\r\n          page_size:10,\r\n          lay_out:\"prev, pager, next, jumper\",\r\n          to_toal:1000,\r\n          },\r\n          alltableData:[],\r\n                tableData:[],\r\n          filterdata:[],\r\n              form: {\r\n              type:\"\",\r\n              describe:\"\",\r\n              income:\"\",\r\n              expend:\"\",\r\n              cash:\"\",\r\n              remark:\"\",\r\n              id:''\r\n              },\r\n               ifshow:{\r\n                  show:false,\r\n                  title:'添加',\r\n                  option:'add'\r\n                },\r\n\r\n        }\r\n    },\r\n    computed:{\r\n        user(){\r\n          return this.$store.getters.user;\r\n        }\r\n    },\r\n    created(){\r\n        this.getProfile()\r\n    },\r\n    methods:{\r\n      onselect(){\r\n       if (!this.date.value1 || !this.date.value2) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"请选择时间区间\"\r\n        });\r\n        this.getProfile();\r\n        return;\r\n      }\r\n    const stime=this.date.value1.getTime()\r\n    const etime=this.date.value2.getTime()\r\n    this.alltableData=this.filterdata.filter((item)=>{\r\n        let date = new Date(item.date);\r\n        let time = date.getTime();\r\n        return time >= stime && time <= etime;\r\n        this.setPaginations();\r\n    })\r\n      },\r\n        getProfile(){\r\n            this.$axios.get('/api/allprofiles').then(res=>{\r\n                this.alltableData=res.data\r\n                this.filterdata=res.data\r\n                 this.setPaginations();               \r\n            }).catch(err=>{\r\n                console.log(err)\r\n            })    \r\n        },\r\n        setPaginations(){\r\n            this.pages.to_toal=this.alltableData.length\r\n            this.pages.current_page=1,\r\n            this.pages.page_size=10,\r\n            this.tableData=this.alltableData.filter((item,index)=>{\r\n             return index<this.pages.page_size;\r\n            })\r\n        },\r\n      handleEdit(row) {\r\n         this.ifshow={\r\n           title:'编辑',\r\n           show:true,\r\n           option:'edit'\r\n         },\r\n         this.form={\r\n        type:row.type,\r\n        describe:row.describe,\r\n        income:row.income,\r\n        expend:row.expend,\r\n        cash:row.cash,\r\n        remark:row.remark,\r\n        id:row._id\r\n         }\r\n      },\r\n      handleDelete(row) {\r\n        const url=row._id\r\n        this.$axios.get(`/api/profile/delete/${url}`).then(res=>{\r\n          this.$message({\r\n            message:'删除成功',\r\n            type:\"success\"\r\n          }),\r\n          this.getProfile()\r\n        })\r\n      },\r\n       onadd() {\r\n         this.ifshow={\r\n           title:'添加',\r\n           show:true,\r\n           option:'add'\r\n         },\r\n         this.form={\r\n            type:\"\",\r\n        describe:\"\",\r\n        income:\"\",\r\n        expend:\"\",\r\n        cash:\"\",\r\n        remark:\"\",\r\n        id:\"\"\r\n         }\r\n      },\r\n      handleCurrentChange(page) {\r\n         let sortnum = this.pages.page_size * (page - 1);\r\n      let table = this.alltableData.filter((item, index) => {\r\n        return index >= sortnum;\r\n      });\r\n      // 设置默认分页数据\r\n      this.tableData = table.filter((item, index) => {\r\n        return index < this.pages.page_size;\r\n      });\r\n      }\r\n    \r\n    },\r\n    components:{\r\n      indexadd\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.alllist{\r\n padding: 16px;\r\n}\r\n  .btnRight{\r\n    float:right;\r\n  }\r\n  .block{\r\n    float: right;\r\n  }\r\n</style>"]}]}