{"remainingRequest":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\管家\\Desktop\\node_app\\client\\src\\http.js","dependencies":[{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\src\\http.js","mtime":1581843851599},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\管家\\Desktop\\node_app\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UsIExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CnZhciBsb2FkaW5nOyAvL+WumuS5iWxvYWRpbmflj5jph48KCmZ1bmN0aW9uIHN0YXJ0TG9hZGluZygpIHsKICAvL+S9v+eUqEVsZW1lbnQgbG9hZGluZy1zdGFydCDmlrnms5UKICBsb2FkaW5nID0gTG9hZGluZy5zZXJ2aWNlKHsKICAgIGxvY2s6IHRydWUsCiAgICB0ZXh0OiAn5Yqg6L295LitLi4uJywKICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNyknCiAgfSk7Cn0KCmZ1bmN0aW9uIGVuZExvYWRpbmcoKSB7CiAgLy/kvb/nlKhFbGVtZW50IGxvYWRpbmctY2xvc2Ug5pa55rOVCiAgbG9hZGluZy5jbG9zZSgpOwp9IC8vIOivt+axguaLpuaIqiAg6K6+572u57uf5LiAaGVhZGVyCgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDliqDovb0KICBzdGFydExvYWRpbmcoKTsKICBpZiAobG9jYWxTdG9yYWdlLmVsZVRva2VuKSBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gbG9jYWxTdG9yYWdlLmVsZVRva2VuOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyDlk43lupTmi6bmiKogIDQwMSB0b2tlbui/h+acn+WkhOeQhgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBlbmRMb2FkaW5nKCk7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyDplJnor6/mj5DphpIKICBlbmRMb2FkaW5nKCk7CiAgTWVzc2FnZS5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhKTsKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwoKICBpZiAoc3RhdHVzID09IDQwMSkgewogICAgTWVzc2FnZS5lcnJvcigndG9rZW7lgLzml6DmlYjvvIzor7fph43mlrDnmbvlvZUnKTsgLy8g5riF6ZmkdG9rZW4KCiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWxlVG9rZW4nKTsgLy8g6aG16Z2i6Lez6L2sCgogICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["C:/Users/管家/Desktop/node_app/client/src/http.js"],"names":["axios","Message","Loading","router","loading","startLoading","service","lock","text","background","endLoading","close","interceptors","request","use","config","localStorage","eleToken","headers","Authorization","error","Promise","reject","response","data","status","removeItem","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,YAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAIC,OAAJ,C,CAAmB;;AAEnB,SAASC,YAAT,GAAwB;AAAK;AACzBD,EAAAA,OAAO,GAAGF,OAAO,CAACI,OAAR,CAAgB;AACtBC,IAAAA,IAAI,EAAE,IADgB;AAEtBC,IAAAA,IAAI,EAAE,QAFgB;AAGtBC,IAAAA,UAAU,EAAE;AAHU,GAAhB,CAAV;AAKH;;AACD,SAASC,UAAT,GAAsB;AAAK;AACvBN,EAAAA,OAAO,CAACO,KAAR;AACH,C,CAED;;;AACAX,KAAK,CAACY,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrC;AACAV,EAAAA,YAAY;AACZ,MAAIW,YAAY,CAACC,QAAjB,EACIF,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+BH,YAAY,CAACC,QAA5C;AACJ,SAAOF,MAAP;AACH,CAND,EAMG,UAAAK,KAAK,EAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CARD,E,CAUA;;AACApB,KAAK,CAACY,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CAAgC,UAAAS,QAAQ,EAAI;AACxCb,EAAAA,UAAU;AACV,SAAOa,QAAP;AACH,CAHD,EAGG,UAAAH,KAAK,EAAI;AACR;AACAV,EAAAA,UAAU;AACVT,EAAAA,OAAO,CAACmB,KAAR,CAAcA,KAAK,CAACG,QAAN,CAAeC,IAA7B;AAHQ,MAKAC,MALA,GAKWL,KAAK,CAACG,QALjB,CAKAE,MALA;;AAMR,MAAIA,MAAM,IAAI,GAAd,EAAmB;AACfxB,IAAAA,OAAO,CAACmB,KAAR,CAAc,gBAAd,EADe,CAEf;;AACAJ,IAAAA,YAAY,CAACU,UAAb,CAAwB,UAAxB,EAHe,CAIf;;AACAvB,IAAAA,MAAM,CAACwB,IAAP,CAAY,QAAZ;AACH;;AACD,SAAON,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAjBD;AAmBA,eAAepB,KAAf","sourcesContent":["import axios from 'axios'\r\nimport { Message, Loading } from 'element-ui';\r\nimport router from './router'\r\n\r\nlet loading        //定义loading变量\r\n\r\nfunction startLoading() {    //使用Element loading-start 方法\r\n    loading = Loading.service({\r\n        lock: true,\r\n        text: '加载中...',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n    })\r\n}\r\nfunction endLoading() {    //使用Element loading-close 方法\r\n    loading.close()\r\n}\r\n\r\n// 请求拦截  设置统一header\r\naxios.interceptors.request.use(config => {\r\n    // 加载\r\n    startLoading()\r\n    if (localStorage.eleToken)\r\n        config.headers.Authorization = localStorage.eleToken\r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n})\r\n\r\n// 响应拦截  401 token过期处理\r\naxios.interceptors.response.use(response => {\r\n    endLoading()\r\n    return response\r\n}, error => {\r\n    // 错误提醒\r\n    endLoading()\r\n    Message.error(error.response.data)\r\n\r\n    const { status } = error.response\r\n    if (status == 401) {\r\n        Message.error('token值无效，请重新登录')\r\n        // 清除token\r\n        localStorage.removeItem('eleToken')\r\n        // 页面跳转\r\n        router.push('/login')\r\n    }\r\n    return Promise.reject(error)\r\n})\r\n\r\nexport default axios"]}]}